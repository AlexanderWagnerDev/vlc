From 51146078613bf27b7427b1558220ae99204a9692 Mon Sep 17 00:00:00 2001
From: Alexey Pavlov <alexpux@gmail.com>
Date: Fri, 8 Nov 2019 07:40:41 +0100
Subject: [PATCH 1/2] proper def files for 32bit

---
 loader/CMakeLists.txt | 8 ++++++++
 loader/vulkan-1.def   | 2 +-
 2 files changed, 9 insertions(+), 1 deletion(-)

diff --git a/loader/CMakeLists.txt b/loader/CMakeLists.txt
index 622937b2a..b4f91db9b 100644
--- a/loader/CMakeLists.txt
+++ b/loader/CMakeLists.txt
@@ -337,6 +337,7 @@ if(WIN32)
     # when adding the suffix the import and runtime library names must be consistent
     # mingw: libvulkan-1.dll.a / vulkan-1.dll
     # msvc: vulkan-1.lib / vulkan-1.dll
+    if(MSVC)
     set_target_properties(vulkan
                           PROPERTIES
                           OUTPUT_NAME ${API_TYPE}-1)
@@ -346,6 +347,13 @@ if(WIN32)
                               PROPERTIES
                               PREFIX "")
     endif()
+    else()
+    set_target_properties(vulkan
+                          PROPERTIES
+                          LIBRARY_OUTPUT_NAME vulkan
+                          RUNTIME_OUTPUT_NAME vulkan-1
+                          ARCHIVE_OUTPUT_NAME vulkan)
+    endif()
 
     if(MSVC AND ENABLE_WIN10_ONECORE)
         target_link_libraries(vulkan PRIVATE OneCoreUAP.lib LIBCMT.LIB LIBCMTD.LIB LIBVCRUNTIME.LIB LIBUCRT.LIB)
diff --git a/loader/vulkan-1.def b/loader/vulkan-1.def
index f1aab7880..0b8a68ff8 100644
--- a/loader/vulkan-1.def
+++ b/loader/vulkan-1.def
@@ -22,7 +22,7 @@
 ;
 ;;;;  End Copyright Notice ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 
-LIBRARY vulkan-1.dll
+LIBRARY libvulkan-1.dll
 EXPORTS
    vkCreateInstance
    vkDestroyInstance
-- 
2.45.0.windows.1

